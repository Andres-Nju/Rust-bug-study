Auto merge of #2861 - Tastaturtaste:master, r=Amanieu

Fix for https://github.com/rust-lang/libc/issues/2860

This PR is intended to fix https://github.com/rust-lang/libc/issues/2860.
As indicated in the issue, this fix requires linking against "legacy_stdio_definitions.lib", [which is only provided with Visual Studio >=15](https://docs.microsoft.com/en-us/cpp/porting/overview-of-potential-upgrade-issues-visual-cpp?view=msvc-170#libraries). I don't know how this could be checked conditionally at compile time though.

resolved_ts: fix oom and add more metrics (#12190)

* add metrics

Signed-off-by: 5kbpers <tangminghua@pingcap.com>

* fix

Signed-off-by: 5kbpers <tangminghua@pingcap.com>

* remove unused code

Signed-off-by: 5kbpers <tangminghua@pingcap.com>

* add timeout

Signed-off-by: 5kbpers <tangminghua@pingcap.com>

Co-authored-by: qupeng <qupeng@pingcap.com>
Co-authored-by: Ti Chi Robot <ti-community-prow-bot@tidb.io>
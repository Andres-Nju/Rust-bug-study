Enable damage tracking only on Wayland

Other platforms don't have such concepts in general or have them
via different interfaces not related to EGL.

This commit also resolves some minor clippy issues.

Fixes #6051.

Co-authored-by: Christian Duerr <contact@christianduerr.com>
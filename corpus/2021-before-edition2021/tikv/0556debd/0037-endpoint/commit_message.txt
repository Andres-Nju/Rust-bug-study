resolved_ts: reduce retrying of registering observe region (#10244)

* register obseve region when leader applied on its term

Signed-off-by: linning <linningde25@gmail.com>

* retry get_snapshot before return error

Signed-off-by: linning <linningde25@gmail.com>

* address comment

Signed-off-by: linning <linningde25@gmail.com>

* address comment

Signed-off-by: linning <linningde25@gmail.com>

Co-authored-by: ShuNing <nolouch@gmail.com>
Co-authored-by: Ti Chi Robot <ti-community-prow-bot@tidb.io>